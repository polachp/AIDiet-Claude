<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Diet - Sledov√°n√≠ kalori√≠</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üçΩÔ∏è AI Diet</h1>
            <p>Sledov√°n√≠ kalori√≠ s pomoc√≠ AI</p>
            <button onclick="toggleSettings()" class="settings-btn" id="settingsBtn">‚öôÔ∏è Nastaven√≠</button>
        </header>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-overlay" onclick="toggleSettings()"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚öôÔ∏è Nastaven√≠</h2>
                    <button class="modal-close" onclick="toggleSettings()">‚úï</button>
                </div>
                <div class="modal-body">
                    <!-- API kl√≠ƒç -->
                    <div id="apiKeySection">
                        <div class="form-group">
                            <label for="apiKey">Gemini API kl√≠ƒç:</label>
                            <input type="password" id="apiKey" placeholder="Zadejte v√°≈° Gemini API kl√≠ƒç">
                            <button onclick="saveApiKey()">üíæ Ulo≈æit kl√≠ƒç</button>
                            <small>Z√≠skejte zdarma na <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                        </div>
                    </div>

                    <!-- U≈æivatelsk√© √∫daje -->
                    <div class="user-data-section" id="userDataSection">
                        <h3 style="margin-top: 16px; margin-bottom: 12px; color: var(--text-primary); font-size: 1.1em; font-weight: 600;">Osobn√≠ √∫daje (pro v√Ωpoƒçet denn√≠ho p≈ô√≠jmu)</h3>
                        <div class="user-data-grid">
                            <div class="form-group">
                                <label for="userAge">Vƒõk (roky):</label>
                                <input type="number" id="userAge" placeholder="25" min="10" max="120">
                            </div>
                            <div class="form-group">
                                <label for="userGender">Pohlav√≠:</label>
                                <select id="userGender">
                                    <option value="male">Mu≈æ</option>
                                    <option value="female">≈Ωena</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="userWeight">V√°ha (kg):</label>
                                <input type="number" id="userWeight" placeholder="70" min="30" max="300" step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="userHeight">V√Ω≈°ka (cm):</label>
                                <input type="number" id="userHeight" placeholder="175" min="100" max="250">
                            </div>
                            <div class="form-group">
                                <label for="userActivity">Aktivita:</label>
                                <select id="userActivity">
                                    <option value="1.2">Sedav√© zamƒõstn√°n√≠</option>
                                    <option value="1.375">Lehk√° aktivita (1-3x t√Ωdnƒõ)</option>
                                    <option value="1.55" selected>St≈ôednƒõ aktivn√≠ (3-5x t√Ωdnƒõ)</option>
                                    <option value="1.725">Velmi aktivn√≠ (6-7x t√Ωdnƒõ)</option>
                                    <option value="1.9">Extra aktivn√≠ (2x dennƒõ)</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="saveUserData()" class="btn-primary" style="margin-top: 12px;">üíæ Ulo≈æit osobn√≠ √∫daje</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vstupn√≠ formul√°≈ô -->
        <section class="input-section">
            <h2>P≈ôidat j√≠dlo</h2>

            <!-- Tab menu -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('text')">üìù Text</button>
                <button class="tab-btn" onclick="switchTab('photo')">üì∑ Foto</button>
                <button class="tab-btn" onclick="switchTab('voice')">üé§ Hlas</button>
            </div>

            <!-- Textov√Ω vstup -->
            <div id="textTab" class="tab-content active">
                <div class="form-group">
                    <input type="text" id="textInput" placeholder="Napi≈°te co jste snƒõdli, nap≈ô: 'dva rohl√≠ky s m√°slem a ≈°unkou, jogurt'" />
                    <small style="display: block; margin-top: 8px; color: var(--text-secondary); font-size: 0.9em;">Stisknƒõte Enter pro anal√Ωzu</small>
                </div>
            </div>

            <!-- Foto vstup -->
            <div id="photoTab" class="tab-content">
                <div class="form-group">
                    <input type="file" id="photoInput" accept="image/*" capture="environment">
                    <small style="display: block; margin-top: 8px; color: var(--text-secondary); font-size: 0.9em;">Foto se automaticky analyzuje po v√Ωbƒõru</small>
                    <div id="photoPreview" class="photo-preview"></div>
                    <div id="photoLoading" class="inline-loading" style="display: none;">
                        <div class="spinner-small"></div>
                        <span>Analyzuji fotografii...</span>
                    </div>
                </div>
            </div>

            <!-- Hlasov√Ω vstup -->
            <div id="voiceTab" class="tab-content">
                <div class="form-group">
                    <textarea id="voiceInput" placeholder="1. Kliknƒõte 'Zaƒç√≠t nahr√°vat' a nadiktujte co jste snƒõdli&#10;2. Kliknƒõte 'Zastavit' pro ukonƒçen√≠&#10;Nahr√°vka se automaticky zpracuje po zastaven√≠" rows="3" readonly></textarea>
                    <button onclick="startVoiceRecognition()" id="voiceBtn" class="btn-primary">üé§ Zaƒç√≠t nahr√°vat</button>
                    <div id="voiceLoading" class="inline-loading" style="display: none;">
                        <div class="spinner-small"></div>
                        <span>Zpracov√°v√°m hlasov√Ω vstup...</span>
                    </div>
                </div>
            </div>

            <!-- Loading indicator -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Analyzuji j√≠dlo...</p>
            </div>
        </section>

        <!-- Denn√≠ p≈ôehled -->
        <section class="daily-summary">
            <h2>Dnes - <span id="currentDate"></span></h2>

            <!-- Celkov√© kalorie -->
            <div class="calories-main">
                <div class="calories-percentage" id="caloriesPercentage">0%</div>
                <div class="calories-secondary">
                    <span id="totalCalories">0</span> / <span id="caloriesGoalValue">2000</span> kcal
                </div>
                <div class="calories-progress-bar">
                    <div class="calories-progress-fill" id="caloriesProgressFill"></div>
                </div>
            </div>

            <!-- Makro≈æiviny s kruhov√Ωmi grafy -->
            <div>
                <h3 style="margin-bottom: 15px; color: var(--text-secondary); font-size: 1.1em;">Denn√≠ p≈ô√≠jem makro≈æivin</h3>
                <div class="macros-grid">
                    <!-- B√≠lkoviny -->
                    <div class="macro-circle-card">
                        <div class="circle-progress">
                            <svg width="120" height="120">
                                <circle class="circle-bg" cx="60" cy="60" r="52"></circle>
                                <circle class="circle-progress-protein" id="proteinCircle" cx="60" cy="60" r="52"></circle>
                            </svg>
                            <div class="circle-text">
                                <div class="circle-value" id="totalProtein">0g</div>
                                <div class="circle-percent" id="proteinPercent">0%</div>
                            </div>
                        </div>
                        <div class="circle-label">B√≠lkoviny</div>
                        <div class="circle-goal" id="proteinGoal">z 0g</div>
                    </div>

                    <!-- Sacharidy -->
                    <div class="macro-circle-card">
                        <div class="circle-progress">
                            <svg width="120" height="120">
                                <circle class="circle-bg" cx="60" cy="60" r="52"></circle>
                                <circle class="circle-progress-carbs" id="carbsCircle" cx="60" cy="60" r="52"></circle>
                            </svg>
                            <div class="circle-text">
                                <div class="circle-value" id="totalCarbs">0g</div>
                                <div class="circle-percent" id="carbsPercent">0%</div>
                            </div>
                        </div>
                        <div class="circle-label">Sacharidy</div>
                        <div class="circle-goal" id="carbsGoal">z 0g</div>
                    </div>

                    <!-- Tuky -->
                    <div class="macro-circle-card">
                        <div class="circle-progress">
                            <svg width="120" height="120">
                                <circle class="circle-bg" cx="60" cy="60" r="52"></circle>
                                <circle class="circle-progress-fat" id="fatCircle" cx="60" cy="60" r="52"></circle>
                            </svg>
                            <div class="circle-text">
                                <div class="circle-value" id="totalFat">0g</div>
                                <div class="circle-percent" id="fatPercent">0%</div>
                            </div>
                        </div>
                        <div class="circle-label">Tuky</div>
                        <div class="circle-goal" id="fatGoal">z 0g</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seznam j√≠del -->
        <section class="meals-section">
            <h2>Seznam j√≠del</h2>
            <div id="mealsList" class="meals-list">
                <p class="empty-state">Zat√≠m ≈æ√°dn√° j√≠dla. P≈ôidejte sv√© prvn√≠ j√≠dlo!</p>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>
